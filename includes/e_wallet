<h1 id='api-e-wallet-aggregator-coming-soon' type='normal'>API E-Wallet Aggregator (Coming Soon)</h1>
<p>E-Wallet Aggregator API allows partners to seamlessly charge and receive payments directly from top e-wallet issuers. With one integration, they are able to get access to all of OY’s available e-wallets ((OVO, ShopeePay, LinkAja, and DANA) and upcoming e-wallet integrations.</p>
<h2 id='create-e-wallet-transaction-api-e-wallet-aggregator-coming-soon' type='normal'>Create E-Wallet Transaction</h2>
<p>Use this API to create an e-wallet transaction for your user</p>
<h3 id='https-request-create-e-wallet-transaction' type='normal'>HTTPS Request</h3>
<p><strong>[Production]</strong> <code>POST https://partner.oyindonesia.com/api/e-wallet-aggregator/create-transaction</code> <br/></p>

<p><strong>[Staging]</strong> <code>POST https://api-stg.oyindonesia.com/api/e-wallet-aggregator/create-transaction</code></p>
<h3 id='request-headers-create-e-wallet-transaction' type='normal'>Request Headers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>X-Api-Key</td>
<td>String</td>
<td>API Key used to connect to this particular endpoint</td>
</tr>
<tr>
<td>X-Oy-Username</td>
<td>String</td>
<td>Your OY! account username</td>
</tr>
</tbody></table>
<h3 id='request-parameters-create-e-wallet-transaction' type='normal'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>String(255)</td>
<td>TRUE</td>
<td>-</td>
<td>ID generated by Partner for a specific user/customer</td>
</tr>
<tr>
<td>sub_merchant_id</td>
<td>String(255)</td>
<td>FALSE</td>
<td>-</td>
<td>ID generated by Partner for a specific sub-merchant</td>
</tr>
<tr>
<td>partner_trx_id</td>
<td>String(255)</td>
<td>TRUE</td>
<td>-</td>
<td>ID generated by Partner for a specific transaction</td>
</tr>
<tr>
<td>amount</td>
<td>BigDecimal</td>
<td>TRUE</td>
<td>-</td>
<td>Transaction amount. Min = 1,000. Max = 10,000,000</td>
</tr>
<tr>
<td>email</td>
<td>String(255)</td>
<td>FALSE</td>
<td>-</td>
<td>Customer&#39;s email</td>
</tr>
<tr>
<td>ewallet_code</td>
<td>String(255)</td>
<td>TRUE</td>
<td>-</td>
<td>The ewallet issuer that the customer will use to pay. Refer to table &quot;E-Wallet Details&quot; for the list of codes</td>
</tr>
<tr>
<td>mobile_number</td>
<td>String(255)</td>
<td>CONDITIONAL</td>
<td>-</td>
<td>Customer mobile number (format 628xxxxxxxxxx) used on their ewallet account. Only required if ewallet_code is equal to &quot;ovo_ewallet&quot;</td>
</tr>
<tr>
<td>redirect_url_env</td>
<td>String(255)</td>
<td>CONDITIONAL</td>
<td>&quot;web&quot;</td>
<td>Indicates the environment that you use to redirect the customers back once payment has been completed in e-wallet issuers. Possible values: &quot;web&quot; or &quot;app&quot;. Only used if ewallet_code is equal to &quot;dana_ewallet&quot;</td>
</tr>
<tr>
<td>success_redirect_url</td>
<td>String(255)</td>
<td>CONDITIONAL</td>
<td>-</td>
<td>Indicates the URL of your environment (to redirect the customers back once payment has been  completed in e-wallet issuers.)  Accepts HTTP links and URL  scheme formats.  Required if ewallet_code = DANA or LINKAJA or SHOPEEPAY.</td>
</tr>
<tr>
<td>expiration_time</td>
<td>Long</td>
<td>FALSE</td>
<td>Maximum expiration time (in minutes) for each ewallet issuer</td>
<td>Expiration time of the transaction in minute  e.g If you want the transaction to be expired after 5 minutes, you just have to set expiration_time to 5.  Each ewallet type might have different expiration time rule, please see table &quot;E-Wallet Details&quot;</td>
</tr>
</tbody></table>
<h3 id='response-parameters-create-e-wallet-transaction' type='normal'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Object</td>
<td>Status of response in Object <code>{code: &lt;status_code&gt;, message: &lt;status_message&gt;}</code>. See table &quot;Response Code&quot; for more details</td>
</tr>
<tr>
<td>ewallet_trx_status</td>
<td>String(20)</td>
<td>Always filled with WAITING_PAYMENT if a transaction is successfully created</td>
</tr>
<tr>
<td>trx_id</td>
<td>String(255)</td>
<td>Filled with a unique transaction identifier from OY</td>
</tr>
<tr>
<td>customer_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific user/customer</td>
</tr>
<tr>
<td>partner_trx_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific transaction</td>
</tr>
<tr>
<td>amount</td>
<td>String(255)</td>
<td>Transaction amount</td>
</tr>
<tr>
<td>ewallet_code</td>
<td>String(255)</td>
<td>The ewallet issuer that the customer will use to pay. Refer to this for the list of available ewallet codes</td>
</tr>
<tr>
<td>ewallet_url</td>
<td>String(255)</td>
<td>EWallet URL generated by the the e-wallet issuers to be used for payment purposes</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://partner.oyindonesia.com/api/e-wallet-aggregator/create-transaction <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-api-key: apikeymu'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-oy-username: yourusername'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "customer_id": "my_user_id",
        "partner_trx_id": "ABC123456527",
        "sub_merchant_id": "zx88989F",
        "amount": 75000,
        "email": "johndoe@gmail.com;jane@gmail.com",
        "ewallet_code": "shopeepay_ewallet",
        "mobile_number": "6282114845847", 
        "redirect_url_env": "app",
        "success_redirect_url":"https://myweb.com/usertx/123456",
        "expiration_time": 15
    }'</span>
</code></pre></div><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="o">{</span>
  <span class="s">'Content-Type'</span><span class="o">:</span> <span class="s">'application/json'</span><span class="o">,</span>
  <span class="s">'X-Oy-Username'</span><span class="o">:</span> <span class="s">'{{username}}'</span><span class="o">,</span>
  <span class="s">'X-Api-Key'</span><span class="o">:</span> <span class="s">'{{api-key}}'</span>
<span class="o">};</span>
<span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="na">Request</span><span class="o">(</span><span class="s">'POST'</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">'{{base_url}}/api/e-wallet-aggregator/create-transaction'</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">encode</span><span class="o">({</span>
 <span class="s">"customer_id"</span><span class="o">:</span> <span class="s">"my_user_id"</span><span class="o">,</span>
 <span class="s">"partner_trx_id"</span><span class="o">:</span> <span class="s">"ABC123456527"</span><span class="o">,</span>
 <span class="s">"sub_merchant_id"</span><span class="o">:</span> <span class="s">"zx88989F"</span><span class="o">,</span>
 <span class="s">"amount"</span><span class="o">:</span> <span class="mi">75000</span><span class="o">,</span>
 <span class="s">"email"</span><span class="o">:</span> <span class="s">"johndoe@gmail.com;jane@gmail.com"</span><span class="o">,</span>
 <span class="s">"ewallet_code"</span><span class="o">:</span> <span class="s">"shopeepay_ewallet"</span><span class="o">,</span>
 <span class="s">"mobile_number"</span><span class="o">:</span> <span class="s">"6282114845847"</span><span class="o">,</span> 
 <span class="s">"redirect_url_env"</span><span class="o">:</span> <span class="s">"app"</span><span class="o">,</span>
 <span class="s">"success_redirect_url"</span><span class="o">:</span><span class="s">"https://myweb.com/usertx/123456"</span><span class="o">,</span>
 <span class="s">"expiration_time"</span><span class="o">:</span> <span class="mi">15</span>
<span class="o">});</span>
<span class="n">request</span><span class="o">.</span><span class="na">headers</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>

<span class="n">http</span><span class="o">.</span><span class="na">StreamedResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">request</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">print</span><span class="o">(</span><span class="n">await</span> <span class="n">response</span><span class="o">.</span><span class="na">stream</span><span class="o">.</span><span class="na">bytesToString</span><span class="o">());</span>
<span class="o">}</span>
<span class="k">else</span> <span class="o">{</span>
  <span class="n">print</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">reasonPhrase</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"strings"</span>
  <span class="s">"net/http"</span>
  <span class="s">"io/ioutil"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">url</span> <span class="o">:=</span> <span class="s">"%7B%7Bbase_url%7D%7D/api/e-wallet-aggregator/create-transaction"</span>
  <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

  <span class="n">payload</span> <span class="o">:=</span> <span class="n">strings</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="s">`{
     "customer_id": "my_user_id",
     "partner_trx_id": "ABC123456527",
     "sub_merchant_id": "zx88989F",
     "amount": 75000,
     "email": "johndoe@gmail.com;jane@gmail.com",
     "ewallet_code": "shopeepay_ewallet",
     "mobile_number": "6282114845847", 
     "redirect_url_env": "app",
     "success_redirect_url":"https://myweb.com/usertx/123456",
     "expiration_time": 15
}`</span><span class="p">)</span>

  <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span> <span class="p">{</span>
  <span class="p">}</span>
  <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-Oy-Username"</span><span class="p">,</span> <span class="s">"{{username}}"</span><span class="p">)</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-Api-Key"</span><span class="p">,</span> <span class="s">"{{api-key}}"</span><span class="p">)</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="k">defer</span> <span class="n">res</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

  <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">OkHttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OkHttpClient</span><span class="o">().</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">MediaType</span> <span class="n">mediaType</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
<span class="nc">RequestBody</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">RequestBody</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">mediaType</span><span class="o">,</span> <span class="s">"{\n\t\"customer_id\": \"my_user_id\",\n\t\"partner_trx_id\": \"ABC123456527\",\n\t\"sub_merchant_id\": \"zx88989F\",\n\t\"amount\": 75000,\n\t\"email\": \"john.doe@email.com\",\n\t\"ewallet_code\": \"shopeepay_ewallet\",\n\t\"mobile_number\": \"6282114845847\",\n\t\"expiration_time\": 15,\n\t\"redirect_url_env\": \"app\",\n\t\"success_redirect_url\": \"https://myweb.com/usertx/123456\"\n}"</span><span class="o">);</span>
<span class="nc">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Request</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">"{{base_url}}/api/e-wallet-aggregator/create-transaction"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">"POST"</span><span class="o">,</span> <span class="n">body</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"X-Oy-Username"</span><span class="o">,</span> <span class="s">"{{username}}"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"X-Api-Key"</span><span class="o">,</span> <span class="s">"{{api-key}}"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">newCall</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">customer_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my_user_id</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">partner_trx_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ABC123456527</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">sub_merchant_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">zx88989F</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mi">75000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">johndoe@gmail.com;jane@gmail.com</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">ewallet_code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">shopeepay_ewallet</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mobile_number</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">6282114845847</span><span class="dl">"</span><span class="p">,</span> 
    <span class="dl">"</span><span class="s2">redirect_url_env</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">success_redirect_url</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">https://myweb.com/usertx/123456</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">expiration_time</span><span class="dl">"</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">%7B%7Bbase_url%7D%7D/api/e-wallet-aggregator/create-transaction</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-Oy-Username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">{{username}}</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-Api-Key</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">{{api-key}}</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">'HTTP/Request2.php'</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HTTP_Request2</span><span class="p">();</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setUrl</span><span class="p">(</span><span class="s1">'{{base_url}}/api/e-wallet-aggregator/create-transaction'</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setMethod</span><span class="p">(</span><span class="n">HTTP_Request2</span><span class="o">::</span><span class="no">METHOD_POST</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setConfig</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'follow_redirects'</span> <span class="o">=&gt;</span> <span class="kc">TRUE</span>
<span class="p">));</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setHeader</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'X-Oy-Username'</span> <span class="o">=&gt;</span> <span class="s1">'{{username}}'</span><span class="p">,</span>
  <span class="s1">'X-Api-Key'</span> <span class="o">=&gt;</span> <span class="s1">'{{api-key}}'</span>
<span class="p">));</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setBody</span><span class="p">(</span><span class="s1">'{\n  "customer_id": "my_user_id",\n "partner_trx_id": "ABC123456527",\n "sub_merchant_id": "zx88989F",\n "amount": 75000,\n  "email": "johndoe@gmail.com;jane@gmail.com",\n  "ewallet_code": "shopeepay_ewallet",\n  "mobile_number": "6282114845847",\n "redirect_url_env": "app",\n "success_redirect_url":"https://myweb.com/usertx/123456",\n "expiration_time": 15\n}'</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">send</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getStatus</span><span class="p">()</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getBody</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Unexpected HTTP status: '</span> <span class="mf">.</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getStatus</span><span class="p">()</span> <span class="mf">.</span> <span class="s1">' '</span> <span class="mf">.</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getReasonPhrase</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="n">HTTP_Request2_Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">'Error: '</span> <span class="mf">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"{{base_url}}"</span><span class="p">)</span>
<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
  <span class="s">"customer_id"</span><span class="p">:</span> <span class="s">"my_user_id"</span><span class="p">,</span>
  <span class="s">"partner_trx_id"</span><span class="p">:</span> <span class="s">"ABC123456527"</span><span class="p">,</span>
  <span class="s">"sub_merchant_id"</span><span class="p">:</span> <span class="s">"zx88989F"</span><span class="p">,</span>
  <span class="s">"amount"</span><span class="p">:</span> <span class="mi">75000</span><span class="p">,</span>
  <span class="s">"email"</span><span class="p">:</span> <span class="s">"johndoe@gmail.com;jane@gmail.com"</span><span class="p">,</span>
  <span class="s">"ewallet_code"</span><span class="p">:</span> <span class="s">"shopeepay_ewallet"</span><span class="p">,</span>
  <span class="s">"mobile_number"</span><span class="p">:</span> <span class="s">"6282114845847"</span><span class="p">,</span> 
  <span class="s">"redirect_url_env"</span><span class="p">:</span> <span class="s">"app"</span><span class="p">,</span>
  <span class="s">"success_redirect_url"</span><span class="p">:</span><span class="s">"https://myweb.com/usertx/123456"</span><span class="p">,</span>
  <span class="s">"expiration_time"</span><span class="p">:</span> <span class="mi">15</span>
<span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'X-Oy-Username'</span><span class="p">:</span> <span class="s">'{{username}}'</span><span class="p">,</span>
  <span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="s">'{{api-key}}'</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/api/e-wallet-aggregator/create-transaction"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured similar like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"ewallet_trx_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING_PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"789467agf238893894rfcw7978iu7g7e"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partner_trx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123456527"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ewallet_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopeepay_ewallet"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ewallet_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://someewalletlink.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='e-wallet-transaction-callback-api-e-wallet-aggregator-coming-soon' type='normal'>E-Wallet Transaction Callback</h2>
<p>The E-Wallet Transaction Callback will be sent as a POST request (using JSON format) to your web hook. Please inform your Callback web hook to our business representative or to partner@oyindonesia.com</p>

<p>You will receive the callback when your user has successfully paid the e-wallet transaction. (Note: We send the callback ONLY for a successful transaction.</p>
<h3 id='callback-for-delayed-settlement-non-real-time-settlement-e-wallet-transaction-callback' type='normal'>Callback for Delayed Settlement (Non-Real Time Settlement)</h3>
<p>If your settlement is non-real time, for every transaction whose payment method is settled H+&gt;0 from the time of transaction, you will receive two callbacks with details as follows:</p>

<ol>
<li> 1st Callback -&gt; To be sent after your customer successfully executes the transaction. For example, if your customer executes the transaction on 11 May 2021 at 14:00:00, that is also when we send the 1st Callback to you. In the 1st callback, the settlement status is set to WAITING (because it is not yet settled to your Account Statement balance)</li>
<li> 2nd Callback -&gt; To be sent after the settlement status is changed from WAITING into SUCCESS. For example, if the settlement status is changed into SUCCESS on 12 May 2021 at 15:00:00, that is also when we send the 2nd Callback to you. In the 2nd callback, the settlement status is SUCCESS</li>
</ol>
<h3 id='callback-parameters-e-wallet-transaction-callback' type='normal'>Callback Parameters</h3>
<blockquote>
<p>Response callback:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"789467agf238893894rfcw7978iu7g7e"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">75000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ewallet_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopeepay_ewallet"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mobile_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6282114845847"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"success_redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://myweb.com/usertx/123456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settlement_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01/02/2020T15:00:00.000+0000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settlement_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>The status of the payment and it is always set to to true</td>
</tr>
<tr>
<td>partner_trx_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific transaction</td>
</tr>
<tr>
<td>trx_id</td>
<td>String(255)</td>
<td>Filled with a unique transaction identifier from OY</td>
</tr>
<tr>
<td>customer_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific user/customer</td>
</tr>
<tr>
<td>amount</td>
<td>BigDecimal</td>
<td>Transaction amount</td>
</tr>
<tr>
<td>ewallet_code</td>
<td>String(255)</td>
<td>The ewallet issuer that the customer used to pay. Refer to this for the list of available ewallet codes</td>
</tr>
<tr>
<td>mobile_number</td>
<td>String(255)</td>
<td>Customer mobile number</td>
</tr>
<tr>
<td>success_redirect_url</td>
<td>String(255)</td>
<td>Indicates the URL of your environment (to redirect the customers back once payment has been  completed in e-wallet issuers.)</td>
</tr>
<tr>
<td>settlement_time</td>
<td>Timestamp</td>
<td>The timestamp (in UTC+7) indicating when the fund will be settled to partner’s account statement, format <code>dd/MM/yyyy&#39;T&#39;HH:mm:ss.SSSZZZZ</code></td>
</tr>
<tr>
<td>settlement_status</td>
<td>String(255)</td>
<td>Status of the settlement (e.g. success/waiting)</td>
</tr>
</tbody></table>
<h2 id='check-e-wallet-transaction-status-api-e-wallet-aggregator-coming-soon' type='normal'>Check E-Wallet Transaction Status</h2>
<p>Use this API to check the status of an e-wallet transaction.</p>
<h3 id='https-request-check-e-wallet-transaction-status' type='normal'>HTTPS Request</h3>
<p><strong>[Production]</strong> <code>POST https://partner.oyindonesia.com/api/e-wallet-aggregator/check-status</code> <br/></p>

<p><strong>[Staging]</strong> <code>POST https://api-stg.oyindonesia.com/api/e-wallet-aggregator/check-status</code></p>
<h3 id='request-headers-check-e-wallet-transaction-status' type='normal'>Request Headers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>X-Api-Key</td>
<td>String</td>
<td>API Key used to connect to this particular endpoint</td>
</tr>
<tr>
<td>X-Oy-Username</td>
<td>String</td>
<td>Your OY! account username</td>
</tr>
</tbody></table>
<h3 id='request-parameters-check-e-wallet-transaction-status' type='normal'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>partner_trx_id</td>
<td>String(255)</td>
<td>TRUE</td>
<td>-</td>
<td>ID generated by Partner for a specific transaction</td>
</tr>
</tbody></table>
<h3 id='response-parameters-check-e-wallet-transaction-status' type='normal'>Response Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Object</td>
<td>Status of response in Object <code>{code: &lt;status_code&gt;, message: &lt;status_message&gt;}</code></td>
</tr>
<tr>
<td>ewallet_trx_status</td>
<td>String(20)</td>
<td>Current transaction status, refer to &quot;E-Wallet Transaction Status&quot; for more details</td>
</tr>
<tr>
<td>trx_id</td>
<td>String(255)</td>
<td>Filled with a unique transaction identifier from OY</td>
</tr>
<tr>
<td>customer_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific user/customer</td>
</tr>
<tr>
<td>partner_trx_id</td>
<td>String(255)</td>
<td>ID generated by Partner for a specific transaction</td>
</tr>
<tr>
<td>amount</td>
<td>String(255)</td>
<td>Transaction Amount</td>
</tr>
<tr>
<td>ewallet_code</td>
<td>String(255)</td>
<td>The ewallet issuer that the customer will use to pay.</td>
</tr>
<tr>
<td>ewallet_url</td>
<td>String(255)</td>
<td>EWallet URL passed from the e-wallet issuers to be used for payment purposes</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://partner.oyindonesia.com/api/e-wallet-aggregator/check-status <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-api-key: apikeymu'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-oy-username: yourusername'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "partner_trx_id": "ABC123456527"
    }'</span>
</code></pre></div><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="o">{</span>
  <span class="s">'Content-Type'</span><span class="o">:</span> <span class="s">'application/json'</span><span class="o">,</span>
  <span class="s">'X-Oy-Username'</span><span class="o">:</span> <span class="s">'{{username}}'</span><span class="o">,</span>
  <span class="s">'X-Api-Key'</span><span class="o">:</span> <span class="s">'{{api-key}}'</span>
<span class="o">};</span>
<span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="na">Request</span><span class="o">(</span><span class="s">'POST'</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">'{{base_url}}/api/e-wallet-aggregator/check-status'</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">encode</span><span class="o">({</span>
 <span class="s">"partner_trx_id"</span><span class="o">:</span> <span class="s">"ABC123456527"</span>
<span class="o">});</span>
<span class="n">request</span><span class="o">.</span><span class="na">headers</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>

<span class="n">http</span><span class="o">.</span><span class="na">StreamedResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">request</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">print</span><span class="o">(</span><span class="n">await</span> <span class="n">response</span><span class="o">.</span><span class="na">stream</span><span class="o">.</span><span class="na">bytesToString</span><span class="o">());</span>
<span class="o">}</span>
<span class="k">else</span> <span class="o">{</span>
  <span class="n">print</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">reasonPhrase</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"strings"</span>
  <span class="s">"net/http"</span>
  <span class="s">"io/ioutil"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">url</span> <span class="o">:=</span> <span class="s">"%7B%7Bbase_url%7D%7D/api/e-wallet-aggregator/check-status"</span>
  <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

  <span class="n">payload</span> <span class="o">:=</span> <span class="n">strings</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="s">`{
     "partner_trx_id": "ABC123456527"
}`</span><span class="p">)</span>

  <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span> <span class="p">{</span>
  <span class="p">}</span>
  <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-Oy-Username"</span><span class="p">,</span> <span class="s">"{{username}}"</span><span class="p">)</span>
  <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-Api-Key"</span><span class="p">,</span> <span class="s">"{{api-key}}"</span><span class="p">)</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="k">defer</span> <span class="n">res</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

  <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">OkHttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OkHttpClient</span><span class="o">().</span><span class="na">newBuilder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">MediaType</span> <span class="n">mediaType</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>
<span class="nc">RequestBody</span> <span class="n">body</span> <span class="o">=</span> <span class="nc">RequestBody</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">mediaType</span><span class="o">,</span> <span class="s">"{\n\t\"partner_trx_id\": \"ABC123456527\"\n}"</span><span class="o">);</span>
<span class="nc">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Request</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">"{{base_url}}/api/e-wallet-aggregator/check-status"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">"POST"</span><span class="o">,</span> <span class="n">body</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"X-Oy-Username"</span><span class="o">,</span> <span class="s">"{{username}}"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"X-Api-Key"</span><span class="o">,</span> <span class="s">"{{api-key}}"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="nc">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">newCall</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">partner_trx_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ABC123456527</span><span class="dl">"</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">%7B%7Bbase_url%7D%7D/api/e-wallet-aggregator/check-status</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-Oy-Username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">{{username}}</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">X-Api-Key</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">{{api-key}}</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">'HTTP/Request2.php'</span><span class="p">;</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HTTP_Request2</span><span class="p">();</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setUrl</span><span class="p">(</span><span class="s1">'{{base_url}}/api/e-wallet-aggregator/check-status'</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setMethod</span><span class="p">(</span><span class="n">HTTP_Request2</span><span class="o">::</span><span class="no">METHOD_POST</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setConfig</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'follow_redirects'</span> <span class="o">=&gt;</span> <span class="kc">TRUE</span>
<span class="p">));</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setHeader</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'X-Oy-Username'</span> <span class="o">=&gt;</span> <span class="s1">'{{username}}'</span><span class="p">,</span>
  <span class="s1">'X-Api-Key'</span> <span class="o">=&gt;</span> <span class="s1">'{{api-key}}'</span>
<span class="p">));</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">setBody</span><span class="p">(</span><span class="s1">'{\n  "partner_trx_id": "ABC123456527"\n}'</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">send</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getStatus</span><span class="p">()</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getBody</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Unexpected HTTP status: '</span> <span class="mf">.</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getStatus</span><span class="p">()</span> <span class="mf">.</span> <span class="s1">' '</span> <span class="mf">.</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getReasonPhrase</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">catch</span><span class="p">(</span><span class="n">HTTP_Request2_Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">'Error: '</span> <span class="mf">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"{{base_url}}"</span><span class="p">)</span>
<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
  <span class="s">"partner_trx_id"</span><span class="p">:</span> <span class="s">"ABC123456527"</span>
<span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'X-Oy-Username'</span><span class="p">:</span> <span class="s">'{{username}}'</span><span class="p">,</span>
  <span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="s">'{{api-key}}'</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/api/e-wallet-aggregator/check-status"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured similar like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"ewallet_trx_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING_PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"789467agf238893894rfcw7978iu7g7e"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partner_trx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123456527"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ewallet_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopeepay_ewallet"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ewallet_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://someewalletlink.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='e-wallet-details-api-e-wallet-aggregator-coming-soon' type='normal'>E-Wallet Details</h2>
<table><thead>
<tr>
<th>E-Wallet Issuer</th>
<th>E-Wallet Code</th>
<th>Minimum Expiration Time</th>
<th>Maximum Expiration Time</th>
<th>Redirection Feature</th>
</tr>
</thead><tbody>
<tr>
<td>OVO</td>
<td>ovo_ewallet</td>
<td>Parameter is ignored, always set to 55 seconds</td>
<td>Parameter is ignored, always set to 55 seconds</td>
<td>Not supported</td>
</tr>
<tr>
<td>ShopeePay</td>
<td>shopeepay_ewallet</td>
<td>1 minute</td>
<td>60 minutes</td>
<td>Support</td>
</tr>
<tr>
<td>Linkaja</td>
<td>linkaja_ewallet</td>
<td>Parameter is ignored, always set to 5 minutes</td>
<td>Parameter is ignored, always set to 5 minutes</td>
<td>Support</td>
</tr>
<tr>
<td>DANA</td>
<td>dana_ewallet</td>
<td>1 minute</td>
<td>60 minutes</td>
<td>Support</td>
</tr>
</tbody></table>
<h2 id='e-wallet-transaction-status-api-e-wallet-aggregator-coming-soon' type='normal'>E-Wallet Transaction Status</h2>
<table><thead>
<tr>
<th>Status</th>
<th>Trigger</th>
</tr>
</thead><tbody>
<tr>
<td>WAITING_PAYMENT</td>
<td>Transaction is successfully created and currently active</td>
</tr>
<tr>
<td>FAILED</td>
<td>Payment failed</td>
</tr>
<tr>
<td>COMPLETE</td>
<td>Payment successfully received</td>
</tr>
<tr>
<td>REFUNDED</td>
<td>Payment successfully refunded</td>
</tr>
<tr>
<td>EXPIRED</td>
<td>Expiration time is reached with no payment received</td>
</tr>
</tbody></table>
<h2 id='list-of-status-codes-api-e-wallet-aggregator-coming-soon' type='normal'>List of Status Codes</h2><h3 id='create-e-wallet-transaction-list-of-status-codes' type='normal'>Create E-Wallet Transaction</h3>
<p>(Coming Soon)</p>
<h3 id='check-e-wallet-transaction-status-list-of-status-codes' type='normal'>Check E-Wallet Transaction Status</h3>
<p>(Coming Soon)</p>
